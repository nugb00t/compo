#include "stdafx.h"

#include "video_thread.h"

#include "engine.h"
#include "game.h"
#include "utility/profiler.h"

using namespace engine;

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

bool VideoThread::initialize() {
	return Engine::inst().video->initialize();
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

bool VideoThread::update() {
	Profiler::StopWatch stopWatch(Profiler::VIDEO);

	Engine::inst().video->clear();

	if (Engine::inst().video->begin()) {
		Game::inst().video->update();
		Engine::inst().video->end();
	}
	
	Engine::inst().video->present();

    return true;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void VideoThread::terminate() {
	Engine::inst().video->terminate();
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
